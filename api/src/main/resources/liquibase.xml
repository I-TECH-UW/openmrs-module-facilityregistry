<?xml version="1.0" encoding="UTF-8"?>
 
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
 
    <!--
    	See http://wiki.openmrs.org/display/docs/Module+liquibase+File for 
    	documentation on this file.
    
        See http://www.liquibase.org/manual/home#available_database_refactorings
        for a list of supported elements and attributes
    -->
 
	<changeSet id="facilityregistry-1" author="mosesmutesa" >
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT COUNT(*) FROM scheduler_task_config
				WHERE schedulable_class = 'org.openmrs.module.facilityregistry.task.FacilityRegistryTask'
				And name = 'Facility Registry Task'
			</sqlCheck>
		</preConditions>
		<comment>Inserting Facility Registry Task into 'schedule_task_config' table</comment>
		<insert tableName="scheduler_task_config">
			<column name="name" value="Facility Registry Task" />
			<column name="description" value="Fetches Facility List from the Facility Registry Server" />
			<column name="schedulable_class" value="org.openmrs.module.facilityregistry.task.FacilityRegistryTask" />
			<column name="start_on_startup" valueNumeric="1" />
			<column name="repeat_interval" value="10000" />
			<column name="date_created" valueDate="2020-01-01T00:00:00" />
			<column name="created_by" value="1" />
			<column name="uuid" value="0c5a0540-48af-11ec-81d3-0242ac130003" />
		</insert>
	</changeSet>

 
</databaseChangeLog>